{"remainingRequest":"X:\\web-homework\\lesson 11\\frontend\\node_modules\\babel-loader\\lib\\index.js!X:\\web-homework\\lesson 11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!X:\\web-homework\\lesson 11\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!X:\\web-homework\\lesson 11\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"X:\\web-homework\\lesson 11\\frontend\\src\\App.vue","mtime":1639655244865},{"path":"X:\\web-homework\\lesson 11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639605104435},{"path":"X:\\web-homework\\lesson 11\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639605107785},{"path":"X:\\web-homework\\lesson 11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639605104435},{"path":"X:\\web-homework\\lesson 11\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1639605107516}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSGVhZGVyIGZyb20gIi4vY29tcG9uZW50cy9IZWFkZXIiOwppbXBvcnQgTWlkZGxlIGZyb20gIi4vY29tcG9uZW50cy9NaWRkbGUiOwppbXBvcnQgRm9vdGVyIGZyb20gIi4vY29tcG9uZW50cy9Gb290ZXIiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgRm9vdGVyOiBGb290ZXIsCiAgICBNaWRkbGU6IE1pZGRsZSwKICAgIEhlYWRlcjogSGVhZGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogbnVsbCwKICAgICAgcG9zdHM6IFtdCiAgICB9OwogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpICYmICF0aGlzLnVzZXIpIHsKICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikpOwogICAgfQoKICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMucG9zdHMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgfSwKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkVudGVyIiwgZnVuY3Rpb24gKGxvZ2luLCBwYXNzd29yZCkgewogICAgICBpZiAocGFzc3dvcmQgPT09ICIiKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHJlcXVpcmVkIik7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL2p3dCIsIHsKICAgICAgICBsb2dpbjogbG9naW4sCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uSnd0IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25FbnRlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uUmVnaXN0ZXIiLCBmdW5jdGlvbiAocmF3TG9naW4sIHJhd05hbWUsIHBhc3N3b3JkKSB7CiAgICAgIHZhciBsb2dpbiA9IHJhd0xvZ2luLnRyaW0oKTsKICAgICAgdmFyIG5hbWUgPSByYXdOYW1lLnRyaW0oKTsKCiAgICAgIGlmIChwYXNzd29yZCA9PT0gIiIpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCAiUGFzc3dvcmQgaXMgcmVxdWlyZWQiKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBheGlvcy5wb3N0KCIvYXBpLzEvdXNlcnMiLCB7CiAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczIuJHJvb3QuJGVtaXQoIm9uRW50ZXIiLCBsb2dpbiwgcGFzc3dvcmQpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbldyaXRlUG9zdCIsIGZ1bmN0aW9uIChyYXdUaXRsZSwgcmF3VGV4dCkgewogICAgICB2YXIgdGV4dCA9IHJhd1RleHQudHJpbSgpOwogICAgICB2YXIgdGl0bGUgPSByYXdUaXRsZS50cmltKCk7CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9wb3N0cyIsIHsKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICBqd3Q6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIvYXBpLzEvcG9zdHMiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMyLnBvc3RzID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uQ2hhbmdlUGFnZSIsICJJbmRleCIpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uV3JpdGVQb3N0VmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25BZGRDb21tZW50IiwgZnVuY3Rpb24gKHBvc3RJZCwgcmF3VGV4dCkgewogICAgICB2YXIgdGV4dCA9IHJhd1RleHQudHJpbSgpOwogICAgICB2YXIgdXJsID0gIi9hcGkvMS9wb3N0cy8iICsgcG9zdElkICsgIi9jb21tZW50cyI7CiAgICAgIGF4aW9zLnBvc3QodXJsLCB7CiAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICBqd3Q6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25BZGRDb21tZW50U3VjY2VzcyIsIHJlc3BvbnNlLmRhdGEsIHBvc3RJZCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25BZGRDb21tZW50VmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25Kd3QiLCBmdW5jdGlvbiAoand0KSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCBqd3QpOwogICAgICBheGlvcy5nZXQoIi9hcGkvMS91c2Vycy9hdXRoIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgand0OiBqd3QKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnVzZXIgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uQ2hhbmdlUGFnZSIsICJJbmRleCIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi4kcm9vdC4kZW1pdCgib25Mb2dvdXQiKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImp3dCIpOwogICAgICBfdGhpczIudXNlciA9IG51bGw7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\" :user=\"user\"/>\n    <Footer/>\n  </div>\n</template>\n\n<script>\nimport Header from \"./components/Header\";\nimport Middle from \"./components/Middle\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\"\n\n\nexport default {\n  name: 'App',\n  components: {\n    Footer,\n    Middle,\n    Header\n  },\n  data: function () {\n    return {\n      user: null,\n      posts: []\n    }\n  },\n  beforeMount() {\n    if (localStorage.getItem(\"jwt\") && !this.user) {\n      this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"));\n    }\n    axios.get(\"/api/1/posts\").then(response => {\n      this.posts = response.data;\n    })\n  },\n  beforeCreate() {\n    this.$root.$on(\"onEnter\", (login, password) => {\n      if (password === \"\") {\n        this.$root.$emit(\"onEnterValidationError\", \"Password is required\");\n        return;\n      }\n\n      axios.post(\"/api/1/jwt\", {\n        login, password\n      }).then(response => {\n        localStorage.setItem(\"jwt\", response.data);\n        this.$root.$emit(\"onJwt\", response.data);\n      }).catch(error => {\n        this.$root.$emit(\"onEnterValidationError\", error.response.data);\n      });\n    });\n\n    this.$root.$on(\"onRegister\", (rawLogin, rawName, password) => {\n          const login = rawLogin.trim();\n          const name = rawName.trim();\n          if (password === \"\") {\n            this.$root.$emit(\"onRegisterValidationError\", \"Password is required\");\n            return\n          }\n          axios.post(\"/api/1/users\", {\n            login, password, name\n          })\n              .then(() => this.$root.$emit(\"onEnter\", login, password))\n              .catch(error => {\n                this.$root\n                    .$emit(\"onRegisterValidationError\", error.response.data);\n              })\n        }\n    )\n\n    this.$root.$on(\"onWritePost\", (rawTitle, rawText) => {\n      const text = rawText.trim();\n      const title = rawTitle.trim();\n      axios.post(\"/api/1/posts\", {\n        title, text,\n        jwt: localStorage.getItem(\"jwt\")\n      }).then(() => axios.get(\"/api/1/posts\").then(response => {\n        this.posts = response.data;\n        this.$root.$emit(\"onChangePage\", \"Index\");\n      })).catch(error => {\n        this.$root\n            .$emit(\"onWritePostValidationError\", error.response.data);\n      })\n    });\n\n    this.$root.$on(\"onAddComment\", (postId, rawText) => {\n      const text = rawText.trim();\n      const url = \"/api/1/posts/\" + postId + \"/comments\"\n      axios.post(url, {\n        text,\n        jwt: localStorage.getItem(\"jwt\")\n      }).then(() => axios.get(url).then(response => {\n        this.$root.$emit(\"onAddCommentSuccess\", response.data, postId);\n      })).catch(error => {\n        this.$root\n            .$emit(\"onAddCommentValidationError\", error.response.data);\n      })\n    });\n\n    this.$root.$on(\"onJwt\", (jwt) => {\n      localStorage.setItem(\"jwt\", jwt);\n\n      axios.get(\"/api/1/users/auth\", {\n        params: {\n          jwt\n        }\n      }).then(response => {\n        this.user = response.data;\n        this.$root.$emit(\"onChangePage\", \"Index\");\n      }).catch(() => this.$root.$emit(\"onLogout\"))\n    });\n\n    this.$root.$on(\"onLogout\", () => {\n      localStorage.removeItem(\"jwt\");\n      this.user = null;\n    });\n\n  }\n}\n</script>\n\n<style>\n#app {\n\n}\n</style>\n"],"sourceRoot":"src"}]}